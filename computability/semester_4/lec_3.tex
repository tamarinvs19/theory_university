\lecture{3}{25 feb}{\dag}
\section{Перечислимые множества}

\begin{defn}[Перечислимое множество]\index{перечислимое множество}
	Множество $ X \subseteq \N^{k}$ называется \selectedFont{перечислимым}, если 
	\begin{itemize}
		\item его \textit{полухарактеристическая} функция вычислима:
		\[
			\chi_{X}(n) = \begin{cases}
				1, & n \in  X\\
				\uparrow, & n \notin X
			\end{cases}
		\] 
		\item 	или, если существует алгоритм, который выводит все его элементы в некотором порядке.
	\end{itemize}
\end{defn}

\begin{thm}[Об эквивалентных определениях]
    Следующие определения эквивалентны:
    \begin{enumerate}
		\setcounter{enumi}{-1}
		\item \textbf{Перечислимость:} существует алгоритм, который выводит все элементы в некотором порядке
		\item область определения вычислимой функции
		\item область значений вычислимой функции
		\item его полухарактеристическая функция вычислима
		\item область значений  всюду определена вычислимой функцией
    \end{enumerate} 
\end{thm}
\begin{proof}
    ~\begin{description}
		\item[\boxed{ 0 \Longrightarrow 2}]
	    Чтобы посчитать $ \chi_{X}(n)$, запускаем алгоритм, перечисляющий элементы множества, ждем $ n$.

	    Если вывелось $ n$, то выводим $ \chi_{X}(n) = 1$, а иначе мы зациклились, то есть получили расходимость.
	\item[\boxed{ 3 \Longrightarrow 1}] 
	    Действительно, множеств $ X$ будет областью определения $ \chi_{X}$, а она вычислима. 
	\item[\boxed{ 1 \Longrightarrow 0}]
	    Пусть область определения вычисляется алгоритмом  $ B$.

	    Построим алгоритм $ A$ следующим образом: будем запускать $ B$ по шагам и выводить элементы множества
	    \begin{itemize}
		\item $ 1$ шаг на входе $ 0$
		\item $ 2$ шага на $ 0$, $ 2$ шага на $ 1$
		\item $ 3$ шага на $ 0, 1, 2$
		 \item и так далее
		 \item как только $ B$ закончил работу на некотором элементе, выводим этот его.
	    \end{itemize}
	    Этот алгоритм $ A$ перечисляет наше множество, так как для алгоритма $ B$ требуется конечное время работы на элементах области определения.
	\item[\boxed{ 2 \Longrightarrow 0}]
			Аналогично, но выводим значение функции на элементе, на котором мы останавливаемся.
		\item[\boxed{ 1 \Longrightarrow 2}]
			Пусть $ X$ --- область определения функции, которая вычисляется алгоритмом $ A$.
			Рассмотрим следующую функцию:
			\[
				b(n) = \begin{cases}
					n, & \text{если } A \text{ заканчивает работать на } n \\
					\uparrow , & \text{если } A \text{ зацикливается на } n
				\end{cases}
			\] 
			Теперь $ X$ --- область значений $ b(n)$, а она вычислима.
		\item[\boxed{ 0 \Longrightarrow 4}] 
			Пусть $ A$ --- алгоритм, перечисляющий $ X$. Рассмотрим любой $ n_0 \in X$.

			Построим функцию $ f$, которая всюду определена и $ X$ --- ее область значений.
			\[
				f(n)
				= \begin{cases}
					t, &\text{если на $ n$-ом шаге работы $ A$ появляется $ t$} \\
					n_0, & \text{если ничего не появляется}
				\end{cases}
			\] 
		\item[\boxed{ 4 \Longrightarrow 2}]Очевидно 
    \end{description} 
\end{proof}
\begin{note}
    Все области значений и определений не применимы к пустому множеству, которое тоже перечислимое.
\end{note}

\begin{probl}
    В определении перечислимого множества можно выводить элементы с повторениями. Это эквивалентно определению без повторений. 
\end{probl}
\begin{thm}
	Если считать перечислимыми только множества, для которых существует машина Тьюринга, выводящая каждый элемент множества \textit{ровно по разу}, то их класс не поменяется.
\end{thm}
\begin{proof*}
	Увеличиться класс точно не может, так как мы накладываем более строгое условие.

	Проверим, что по обычной МТ $ M$, перечисляющей множество $ A$, можно построить МТ $ M'$, которая будет выводить все элементы ровно один раз.

	Пусть машина $ M'$ работает почти как, но записывает на ленту все числа, которые она уже выводила.

	Теперь, если $ M$ должна вывести число, $ M'$ проверяет, что еще не возвращала его ранее, записывает и выдает.
	Если число уже записано, возвращать не будем.
\end{proof*}

\begin{thm}
    Объединение и пересечение перечислимых множеств тоже перечислимое.
\end{thm}
\begin{proof*}
    По определению перечислимости для первого множества есть алгоритм $ A$, который завершается на всех элементах этого множества. Аналогично для второго --- $ B$.

    \begin{itemize}
	\item Хотим проверить, что $ n$ принадлежит объединению. Будем давать алгоритмам  $ A$ и $ B$ поработать по шагу. Ждем шага, на котором завершает работу хотя бы один алгоритм. Значит, $ n$ лежит в одном из множеств. 
	\item Чтобы проверить принадлежность пересечению запустим сначала $ A$, если он завершит работу, то запустим $ B$. Если и $ B$ остановится, $ n $ лежит в обоих множествах.
    \end{itemize}
    Если элемент не принадлежит объединению или пересечению, получим расходимость.
\end{proof*}


\begin{thm}[Пост]
    $ A$ разрешимо тогда и только тогда, когда $ A$ и $ \overline{A}$ перечислимые.
\end{thm}
\begin{proof}
    ~\begin{description}
		\item[\boxed{ 1 \Longrightarrow 2}] 
			Так как $ A $ разрешимо, можем рассмотреть вычислимую характеристическую функцию $ \chi_{A}(n)$.

			Построим полухрарактеристические для $ A$ и $ \overline{A}$:
			\begin{itemize}
			\item для $ A$: если $ n \in A$, то $ \chi_{A}' = 1$, иначе $ \chi_{A}'(n)$ расходится
			\item для $ \overline{A}$ аналогично, только результаты инвертированы.
			\end{itemize}
		\item[\boxed{ 2 \Longrightarrow 1}]
	    Пусть мы хотим проверить $ n \stackrel{?}{\in} A$.

	    Запускаем одновременно по шагам алгоритмы, перечисляющие $ A$ и $ \overline{A}$, ждем появления $ n$. 
	    Рано или поздно должно появиться, так как в объединении $ A$ и $\overline{A}$ дают все множество. 
	    
	    Если его выдал алгоритм для $ A$, то $ \chi_A(n) = 1$, а если для $\overline{A}$, то $ \chi_A(n) = 0$.
    \end{description} 
\end{proof}


\begin{defn}[Проекция]\index{проекция}
	Подмножество $ P \subseteq \N$ называется \selectedFont{проекцией} $ Q \subseteq \N^2$, если   \[
		\forall x \colon x \in  P \Longleftrightarrow \exists y \colon  (x, y) \in  Q
	.\] 
\end{defn}

\begin{thm}[О проекции]
    Множество $ P$ перечислимое тогда и только тогда, когда $ P$ --- проекция некоторого разрешимого множества $ Q$.
\end{thm}
\begin{proof}
    ~\begin{description}
		\item[\boxed{ 1 \Longrightarrow 2}] 
			Пусть $ A$ --- алгоритм, перечисляющий $ P$. Тогда подойдет
			\[
				Q \coloneqq \{(n, t) \mid n \text{ появляется в течение } t \text{ шагов работы } A\}
			.\] 
		\item[\boxed{ 2 \Longrightarrow 1}] 
			Проекция перечислимого перечислима: берем алгоритм, которые перечисляет $ Q$, но оставляем только первую координату.
    \end{description} 
\end{proof}

\begin{thm}[О графике]
    Частичная функция $ f\colon \N \to \N$ вычислима тогда и только тогда, когда перечислим ее график 
	\[
		F \coloneqq  \{(x, y) \mid f(x) \text{ определена и } f(x) = y\}
	.\] 
\end{thm}
\begin{proof*}
    ~ \begin{description}
		\item[\boxed{ 1 \Longrightarrow 2}] 
	    Чтобы перечислить все все точки графика будем по очереди запускать алгоритм для $ f$ на $ x \in \N$, причем будем давать ему поработать $ i$ шагов на шаге $ i$.
	    
	    Если $ f(x)$ в некоторый момент вычислено, выводим $ (x, f(x))$.
	\item[\boxed{ 2 \Longrightarrow 1}]
	    Построим алгоритм вычисляющий $ f$. 

		Пусть нам на вход дан элемент $ x$, запустим алгоритм, перечисляющий элементы $ F$. 

		Если $ (x, f(x)) \in F$, то есть $ f$ определена в точке $ x$, и в какой-то момент мы выпишем значение.  

	    Если же функция не определена в $ x$, то пары $ (x, f(x))$ в $ F$ нет и мы зацикливаемся.
    \end{description} 
\end{proof*}


\begin{note}
	Различные названия типов множеств в других источниках:
	\begin{center}
	\begin{tabular}{c|c}
		перечислимое & разрешимое \\
		\hline
		полуразрешимое &   \\
		вычислимо перечислимое & вычислимое \\
		полурекурсивное & рекурсивное \\
		\hline
		semi-decidable & decidable \\
		semi-recursive & recursive \\
		enumerable & 
    \end{tabular}
	\end{center}
\end{note}


\section{Универсальные функции}
\begin{defn}
	\selectedFont{Сечением} функции $ U^{(m+1)}(n, \overline{x})$ назовем функцию $ U_n(\overline{x})$ от $ m$ аргументов, которая получается из $ U$ фиксацией первого аргумента.
\end{defn}
\begin{defn}[Универсальная функция]\index{универсальная функция}
$ U(n, \overline{x})$ --- \selectedFont{универсальная} для класса $ K$ функция от $ m$ аргументов, если 
	\begin{itemize}
		\item $ \forall n \colon  U_n(\overline{x}) \in K$
		\item $ \forall f \in K ~ \exists n \colon f = U_{n}$
	\end{itemize}
	То есть множество ее сечений совпадает с $ K$.
\end{defn}

\begin{note}
    Универсальная функция существует только для счетных $ K$.
\end{note}
\begin{note}
    Все рассматриваемые функции частичные.
\end{note}
\begin{name}
	$ \mathcal{F}^{m}$ --- вычислимые функции от $  m$ аргументов.

	$ \mathcal{F}^{m}_{*}$ --- всюду определенные вычислимые функции от $  m$ аргументов. 

	Без верхнего индекса по умолчанию подразумевается единица.
\end{name}

\begin{thm}
    Существует вычислимая функция $ 2$-х аргументов $ U \in  \F^2$, универсальная для класса вычислимых функций $ 1$-ого аргумента $ \F^{1}$.
\end{thm}
\begin{proof}
	Запишем все коды МТ, вычисляющих функции из $ \F^1$, в порядке возрастания (сначала по длине, затем в алфавитном).

	Пусть $ U(i, x)$ --- функция, которая находит запись $ i$-ой МТ $ M_i$, запускает ее на входе $ x$ и возвращает результат.

	Во-первых, $ U $  вычислима, так как вычисляется описанным выше алгоритмом.

	Во-вторых, сечение $ U_i$ соответствует МТ $ M_i$, поэтому $ U$ универсальна для $ \F^{1}$.
\end{proof}


\begin{cor}
    Существует $ U' \in  \F^{m+1}$, универсальная для $ \F^{m}$.
\end{cor}
\begin{note}
    Здесь мы будем использовать $ m$-местную канторовскую нумерацию $ c(x_1, \ldots , x_m)$, которую можно построить, например, последовательным сворачиванием пар.
	Обозначим обратные проекции на $ i$ координату $ c_i(y) = x_i$.
\end{note}
\begin{proof}
	Проверим, что универсальной функцией будет
	\[
		U'(n, \overline{x}) \coloneqq U(n, c(\overline{x}))
	,\] 

	где $ U$ --- универсальная для $ \F^{2}$.

	Во-первых, заметим, что все сечения вычислимы. 

	Далее рассмотрим произвольную функцию $ f(\overline{x}) \in \F^{m}$. Найдем для нее одно из сечений $ U'$.

	Определим 
	\[
		g(y)\coloneqq f\Bigl(c_1(y), \ldots c_m(y)\Bigr)
	.\] 

	$ g$ вычислимая, $ U$ универсальная, поэтому 
	\[
		\exists n \colon  U_n(y) = g(y)
	.\] 
	\begin{align*}
		& U'(n, c(\overline{x})) &=  \tag{по определению  $U$} \\
		&=U(n, c(\overline{x})) &= \tag{$ n$ -- номер $g$} \\
		&=g(c(\overline{x})) &= \tag{по определению $g$} \\
		&= f(c_1(c(\overline{x})), \ldots c_{m}(c(\overline{x})))&= f(\overline{x})
	\end{align*}
	То есть $ U'$ действительно универсальная.
\end{proof}


\begin{thm}
    Не существует $ U \in \F_{*}^{2}$ универсальной для $ \F^{*}$.
\end{thm}
\begin{proof}
    Предположим, что такая функция $ U \in  \F_{*}^{2}$ существует.

	Рассмотрим диагональную функцию:
	\[
		d'(n) = U(n, n) + 1 \in \F_{*}
	.\] 

	С одной стороны, $ d'(n) $  --- общерекурсивная функция, поэтому из универсальности $ U$ следует, что существует сечение $ U_n = d'$.

	С другой стороны, $d'(n)$ отличается от всех сечений $ U$: 
	если $ \forall x \colon U(n, x) = d'(x)$, подставим $ x = n $, получим $U(n, n) = U(n, n ) + 1$. Противоречие. 
\end{proof}
\begin{note}
    Для класса частичных функций такое рассуждение не проходит, так как они могут быть не определены и прибавление единицы ничего не меняет для неопределенности.
\end{note}

\begin{thm}
	Существует вычислимая частичная функция, которая не имеет всюду определенного вычислимого продолжения\;\footnote{то есть нельзя доопределить до всюду определенной вычислимой}.
\end{thm}
\begin{proof}
	Подходит функция $ d'(n) = U(n, n) + 1$, где $ U$ --- универсальная вычислимая функция \;\footnote{далее это обозначение по умолчанию определяет универсальную вычислимую частичную функцию $ U^{(m+1)}$ для вычислимых частичных функций $ m$ аргументов}.

	\noindent
	Пусть ее можно доопределить до вычислимой $ d''$:
	\[
		d'' = 
		\begin{cases}
			U(n, n) + 1,&  \text{ такие $ n$, где  $ U(n, n)$ определена } \\
			\text{определена}, & \text{ где $ U(n, n)$ не определена}
		\end{cases}
	\]
	Поэтому $ d''$ отличается от всех сечений универсальной функции. Противоречие. 
\end{proof}


\subsection{Перечислимое неразрешимое множество}
Аналогично можно ввести определения для перечислимых множеств.

\begin{defn}[Сечение множества]
\selectedFont{Сечением} множества $ W \subseteq \N^{k}$ назовем 
$
	W_n = \{\overline{x} \mid (n, \overline{x}) \in  W\}
$. 
\end{defn}

Докажем аналог прошлой теоремы для множеств.
\begin{thm}
	Существует перечислимое множество $ W^{(m)} \subset \N^{m+1}$, являющееся универсальным для всех перечислимых подмножеств $ \N^{m}$.
\end{thm}
\begin{proof*}
	Рассмотрим универсальную функцию $U^{(m)}$. Пусть множество $W^{(m)}$ --- ее область определения, оно будет перечислимым. 

	Пусть у нас есть перечислимое множество $ X \in  \N^{m}$.

	Найдем такую функцию $ f \in \F^{m}$, для которой $ X$ --- область определения, и такое $ n$, что $ U_n = f$.

	Тогда $ W_n = X$.
\end{proof*}

\begin{thm}
    Существует перечислимое неразрешимое множество.
\end{thm}
\begin{proof}
	Рассмотрим вычислимую $ f(x)$, не имеющую всюду определенного вычислимого продолжения.

	Пусть $ F$ --- ее область определения, она перечислима и неразрешима:
	\begin{itemize}
		\item $ F$ перечислимо, потому что оно является областью определения вычислимой функции;
		\item $ F$ неразрешимо, так как в противном случае можно
			рассмотреть общерекурсивное доопределение $ f$:
			 \[
				 g(x) = \begin{cases}
					 f(x), & x \in F \\
					 0, & x \notin F 
				 \end{cases}
			\] 
			Эта функция всюду определена, вычислима, является продолжением $ f$. Противоречие.
	\end{itemize}
\begin{note}
	$ F = \{n \mid U(n, n) \text{ определено}\}$ --- переформулировка класса $ L_1$ (останавливающиеся на своем входе МТ).
\end{note}
\begin{note}
    $ \overline{F}$ --- пример неперечислимого множества.
\end{note}
\begin{note}
    Область определения универсальной функции перечислимое, но не разрешимое множество, 
	так как область определения $ U(n, n)$ --- частично определенная неразрешимая.
\end{note}
\begin{note}
	<<Проблема остановки>>\footnote{останавливается ли МТ $ M$ на входе $ x$} --- переформулировка принадлежности данной функции к области определения универсальной функции.
\end{note}
\end{proof}


\begin{thm}
    Существует частичная вычислимая функция $ f\colon  \N \to  \{0, 1\}$, которая не имеет  всюду определенного вычислимого продолжения.
\end{thm}
\begin{proof}
    Определим
	\[
		d'''(n) = \begin{cases}
		1, & U(n, n) = 0 \\
		0, & U(n, n) > 0 \\
		\uparrow, & U(n, n) \uparrow
	\end{cases}
	\] 
	Любое доопределение будет отличаться от $ U(n, n)$, так как для всех $ n$ значения $ d'''(x) $ и $ U_n(x)$ различны: здесь либо обе функции расходятся, либо перовое не равно второму.
\end{proof}

\begin{defn}
	Непересекающиеся множества называются \selectedFont{отделимыми разрешимым}, если существует разрешимое множество, содержащее одно из них и непересекающееся с другим.
\end{defn}

\begin{cor}
    Существуют перечислимые непересекающееся неразделимые множества. 
\end{cor}
\begin{proof}
	Подойдут следующие множества:
	$ X = \{ n \mid d'''(n) = 0\}$ и  $ Y = \{n \mid d'''(n) =1 \}$
Пусть существует разделяющее их разрешимое $ C$, содержащее $ Y$ и непересекающееся с $ X$.

Тогда $ \chi_C$ --- общерекурсивное дополнение $ d'''$.  Противоречие. 
\end{proof}

